---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  error = FALSE,
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# ennet: Utilities to Extract Text Data From en-net <img src="man/figures/ennet.png" width="200px" align="right" />

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![R build status](https://github.com/katilingban/ennet/workflows/R-CMD-check/badge.svg)](https://github.com/katilingban/ennet/actions)
[![R build status](https://github.com/katilingban/ennet/workflows/test-coverage/badge.svg)](https://github.com/katilingban/ennet/actions)
[![Codecov test coverage](https://codecov.io/gh/katilingban/ennet/branch/master/graph/badge.svg)](https://codecov.io/gh/katilingban/ennet?branch=master)
[![CodeFactor](https://www.codefactor.io/repository/github/katilingban/ennet/badge)](https://www.codefactor.io/repository/github/katilingban/ennet)
<!-- badges: end -->

[en-net](https://www.en-net.org) is the go to online forum for field practitioners requiring prompt technical advice for operational challenges for which answers are not readily accessible in current guidelines. The questions and the corresponding answers raised within en-net can provide insight into what the key topics of discussion are within the nutrition sector. This package provides utility functions for the extraction, processing and analysis of text data from the online forum.

## Installation

`ennet` is in active development and is not yet available from [CRAN](https://CRAN.R-project.org).

<!---
You can install the released version of rennet from [CRAN](https://CRAN.R-project.org) with:

```r
install.packages("rennet")
```
--->

You can install the development version from [GitHub](https://github.com/) with:

```r
if(!require(remotes) install.packages("remotes"))
remotes::install_github("katilingban/ennet")
```

## Usage

`ennet` package provides a set of functions that extracts information from the [**en-net** online forum](https://www.en-net.org). This set of functions was built on top of the [`rvest`](https://rvest.tidyverse.org) package which provides robust and performant web scraping functions and the [`dplyr`](https://dplyr.tidyverse.org) package which provides a full suite of data manipulation functions. The `ennet` package was designed to be able to interact with how the **en-net** online forum has been structured.

### en-net website structure

The **en-net** online forum website has a very clear and clean structure. The opening page is a list of **thematic areas** which are linked to each of their respective webpages. In each of these **thematic area** webpages is another list, this time a list of **topics** raised within the **thematic area**. These **topics** are the text that an online user provides as the title for the question she/he is going to ask. Each of the **topics** are then again linked to their respective webpages that show the actual full question raised and the ensuing responses and **discussion** stemming from that question.

### Getting list of thematic areas

To get a list of **thematic areas** along with the link to the webpage of each **thematic area**, we use the `get_themes()` function as follows:

```{r usage1, echo = TRUE, eval = FALSE}
## Load ennet package
library(ennet)

## Get all thematic areas from en-net
get_themes()
```

which results in

```{r usage1a, echo = FALSE, eval = TRUE}
library(ennet)
get_themes()
```

The resulting table has two columns - the first is named `themes` which contains the various **thematic areas** on the [**en-net** online forum](https://www.en-net.org/), and the second is named `links` which contains the corresponding URL for the webpages for each of the **thematic areas**.

This will be useful when choosing which themes to focus on when extracting information. This function outputs an object of the appropriate class and structure as the required input for the `get_themes_topics()` function which would lend to piped operations between the two functions (see below).

### Getting list of topics from thematic area/s

To get a list of **topics** for a particular theme, we use the `get_theme_topics()` function as follows:

```{r usage2, echo = TRUE, eval = FALSE}
## Load dplyr to facilitate data manipulation
library(dplyr)

## Extract data from "Coverage assessment" theme
get_themes() %>%
  filter(themes == "Coverage assessment") %>%
  select(links) %>%
  as.character() %>%
  get_theme_topics()
```

which results in

```{r usage2a, echo = FALSE, eval = TRUE}
## Load dplyr to facilitate data manipulation
library(dplyr)

## Extract data from "Coverage assessment" theme
get_themes() %>%
  filter(themes == "Coverage assessment") %>%
  select(links) %>%
  as.character() %>%
  get_theme_topics()
```

The resulting table contains information on all the **topics** within the *Coverage assessment* **thematic area** including URL links to the corresponding webpages for each **topic**

To get a list of **topics** for multiple themes, we use the `get_themes_topics()` function as follows:

```{r usage3, echo = TRUE, eval = FALSE}
## Extract data from "Coverage assessment" theme and "Food assistance" theme
get_themes() %>%
  filter(themes %in% c("Coverage assessment", "Food assistance")) %>%
  get_themes_topics()
```

which results in

```{r usage3a, echo = FALSE, eval = TRUE}
## Extract data from "Coverage assessment" theme and "Food assistance" theme
get_themes() %>%
  filter(themes %in% c("Coverage assessment", "Food assistance")) %>%
  get_themes_topics()
```

The resulting table contains information on all the **topics** within the *Coverage assessment* and *Food assistance* **thematic area** including URL links to the corresponding webpages for each **topic**.

### Getting discussions from topic/s

To get a list of **discussions** for a particular **topic**, we use the `get_topic_discussions()` function as follows:

```{r usage4, echo = TRUE, eval = FALSE}
get_themes() %>%
  filter(themes == "Coverage assessment") %>%
  get_themes_topics() %>%
  filter(Topic == "Resources for coverage assessment") %>%
  select(Link) %>%
  as.character() %>%
  get_topic_discussions()
```

which results in

```{r usage4a, echo = FALSE, eval = TRUE}
get_themes() %>%
  filter(themes == "Coverage assessment") %>%
  get_themes_topics() %>%
  filter(Topic == "Resources for coverage assessment") %>%
  select(Link) %>%
  as.character() %>%
  get_topic_discussions()
```

The resulting table contains information on all the **discussions** within the **topic** on *Resources for coverage assessment* within the **thematic area** of *Coverage assessment* including the text data on the question and the ensuing reply/replies to the question.

To get a list of **discussions** for a set of **topics**, we use the `get_topics_discussions()` function as follows:

```{r usage5, echo = TRUE, eval = FALSE}
get_themes() %>%
  filter(themes %in% c("Coverage assessment", "Food assistance")) %>%
  get_themes_topics() %>%
  get_topics_discussions()
```

which results in

```{r usage5a, echo = FALSE, eval = TRUE}
get_themes() %>%
  filter(themes %in% c("Coverage assessment", "Food assistance")) %>%
  get_themes_topics() %>%
  get_topics_discussions()
```

The resulting table contains information on all the **discussions** within all the **topics** within the **thematic areas** of *Coverage assessment* and *Food assistance* including the text data on the question and the ensuing reply/replies to the question.

## Practical applications

The [**en-net**](https://www.en-net.org/) online forum is a rich resource for understanding the community of users that participate in it. And given how an online forum is designed, that resource can be tapped relatively easily given that the documentation of the interaction and discussion between its users happens in real-time. The `ennet` package facilitates the access to that information through the statistical analysis tool [R](https://www.r-rpoject.org) with which further levels of analysis can be applied to generate meaningful and valuable understanding of this specific community and to some extent the greater nutrition sector at large.

Following are a few practical and meaningful applications of the information generated by the [**en-net**](https://www.en-net.org/) online forum.

### Assess effectiveness of the en-net online forum 

The data from [**en-net**](https://www.en-net.org/) can be used to assess effectiveness of the forum. Effectiveness can be defined as whether the forum has been able to achieve its stated aims/objectives when it was started. Effectiveness can also be expressed in terms of indicators or metrics that reflect overarching principles, ideals or values that those who started the forum adhere to or that the community of users and the wider sector or society believe in. These may include values of inclusion, participation, scientific rigour among others. Given that the forum has been in existence for many years now, information is available over the same period allowing for assessing temporal variation in effectiveness (as defined). This application is a more **normative approach** and will involve creating or developing metrics or taking relevant metrics from other sectors and applying those to this case. 

### Identify gaps in information, knowledge and/or skills

Given the nature of the **en-net** forum as a quick point of recourse for field practitioners to seek answers to practical questions and challenges faced, it can be expected that the data from the forum contains information on what these topics are. These information can then be used to identify most common or most important information, knowledge and skills that have been asked about. By identifying these gaps in information, knowledge and/or skills and by understanding the evolution of these needs over time, we can potentially predict training needs in the near term and over time. This application is a more **formative approach** in that we let the data tell us what information it holds.



